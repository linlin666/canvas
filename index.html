<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>国庆惊喜送送送</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style>
        body, html{
            position: relative;
        }
        div{
            width: 300px;
            height: 100px;
            position: relative;
            background: red;
            line-height: 100px;
            text-align: center;
        }
        #canvas{
            border: 1px solid #dddddd;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>
<div id="textBox"></div>
<canvas id="canvas" width="300" height="100">
</canvas>
<script>
window.onload = function (ev) {
    var canvas  = document.getElementById('canvas');
    var textBox = document.getElementById('textBox');
    textBox.innerText = '国庆加班' + parseInt(Math.random()*7)  + '天';
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = 'gray';
    ctx.rect(0,0,canvas.width,canvas.height); // 使用ract创建矩形，参数依次为：据左上角x,y轴距离，宽、高
    ctx.fill();

    ctx.globalCompositeOperation = 'destination-out';
    var isClear = false;
    //鼠标事件
    canvas.onmousedown = function () {
        doDowm();
    }
    canvas.onmouseup = function () {
        doUp();
    }

    canvas.addEventListener('touchstart',doDowm,true)
    canvas.addEventListener('touchend',doUp,true)
    canvas.addEventListener('touchmove',doMove,true)

    // 清空操作
    canvas.onmousemove = function (e) {
        doMove(e);

    }
    function doDowm() {
        isClear = true;
    }
    function doUp() {
        isClear = false;
    }
    function doMove(e) {
        if (isClear === false){
            return;
        }
        e = e || window.event;
        console.log(e)
        var curX;
        var curY;
        // 移动端
        if(e.touches){
            curX = e.touches[0].pageX - canvas.offsetLeft;
            curY = e.touches[0].pageY - canvas.offsetTop;
        } else {
            curX = e.clientX - canvas.offsetLeft;
            curY = e.clientY - canvas.offsetTop;
        }
        var step = 10;
        ctx.beginPath();
        ctx.arc(curX,curY, step, 0, Math.PI*2, false);
        ctx.fill();
        // ctx.clearRect(curX-step/2, curY-step/2, step,step);
        e.stopPropagation();
    }


}
</script>



</body>
</html>



























